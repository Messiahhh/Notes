{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{60:function(e,a,t){\"use strict\";t.r(a);var r=t(0),l=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t(\"div\",{staticClass:\"content\"},[t(\"h2\",{attrs:{id:\"从文件上传说起\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#从文件上传说起\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" 从文件上传说起\")]),t(\"p\",[e._v(\"文件上传应该算前端里比较重要的知识点，用的多，也涉及了许多HTML5里的知识点。\")]),t(\"p\",[e._v(\"本文简单讲解\")]),t(\"ul\",[t(\"li\",[e._v(\"File\")]),t(\"li\",[e._v(\"Blob\")]),t(\"li\",[e._v(\"FileReader\\n\"),t(\"ul\",[t(\"li\",[e._v(\"readAsText\")]),t(\"li\",[e._v(\"readAsArrayBuffer\")]),t(\"li\",[e._v(\"readAsDataURL\")]),t(\"li\",[e._v(\"readAsBinaryString\")])])]),t(\"li\",[e._v(\"FormData\")])]),t(\"h3\",{attrs:{id:\"file-api\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#file-api\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" File API\")]),t(\"p\",[e._v(\"什么时候会经常用到File API？\")]),t(\"ol\",[t(\"li\",[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"<input type='file'>\\n\")])])]),t(\"li\",[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"el.ondrop = function (e) {\\n    e.preventDefault()\\n    console.log(e.dataTransfer.files)\\n}\\n\")])])])]),t(\"p\",[e._v(\"File的格式是什么样的？\")]),t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"File {\\n\\tlastModified,\\n\\tlastModifiedDate,\\n\\tname: 'xxx',\\n\\tsize: 'xxx,\\n\\ttype: 'xxx'\\n\\twebkitRelativePath: 'xxx',\\n\\t__proto__: File\\n}\\n\")])]),t(\"p\",[e._v(\"而File又是继承于Blob的。\")]),t(\"h3\",{attrs:{id:\"blob-api\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#blob-api\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Blob API\")]),t(\"p\",[e._v(\"Blob是什么？\")]),t(\"blockquote\",[t(\"p\",[e._v(\"Blob（Binary Large Object）对象代表了一段二进制数据，提供了一系列操作接口。其他操作二进制数据的API（比如File对象），都是建立在Blob对象基础上的，继承了它的属性和方法。\")])]),t(\"p\",[e._v(\"如何生成Blob对象？\")]),t(\"ol\",[t(\"li\",[t(\"blockquote\",[t(\"p\",[e._v(\"Blob构造函数，第一个参数是一个包含实际数据的数组，第二个参数是数据的类型，这两个参数都不是必需的。\")])])])]),t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"let blob = new Blob(['hello'])\\nconsole.log(blob) \\nBlob(5) {\\n    size: 5,\\n    type: '',\\n    __proto__: Blob,\\n}\\n\")])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[t(\"blockquote\",[t(\"p\",[e._v(\"Blob对象的slice方法，将二进制数据按照字节分块，返回一个新的Blob对象。\")])])])]),t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"let newBlob = oldBlob.slice(startingByte, endindByte)\\n\")])]),t(\"p\",[e._v(\"因此可以实现分片上传，还能进行上传进度的监控\")]),t(\"h3\",{attrs:{id:\"filereader-api\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#filereader-api\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" FileReader API\")]),t(\"blockquote\",[t(\"p\",[e._v(\"FileReader API用于读取文件，即把文件内容读入内存。它的参数是\"),t(\"code\",[e._v(\"File\")]),e._v(\"对象或\"),t(\"code\",[e._v(\"Blob\")]),e._v(\"对象。\")]),t(\"p\",[e._v(\"对于不同类型的文件，FileReader提供不同的方法读取文件。\")])]),t(\"p\",[e._v(\"那么如何使用FileReader呢？\")]),t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"let reader = new FileReader()\\nreader.onload = function () {\\n  \\n}\\nreader.readAsDataURL()\\n\")])]),t(\"p\",[e._v(\"当然，这里的reader.readAsDataURL是可以替换的。\")]),t(\"ul\",[t(\"li\",[e._v(\"readAsText  二进制对应的文本编码，默认是utf8编码\")]),t(\"li\",[e._v(\"readAsArrayBuffer 二进制数组，用起来和Blob很像\")]),t(\"li\",[e._v(\"readAsDataURL 二进制数据的base64编码，可以用来做预览图\")]),t(\"li\",[e._v(\"readAsBinaryString 返回二进制字符串，笔者不太懂\")])]),t(\"h3\",{attrs:{id:\"formdata-api\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#formdata-api\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" FormData API\")]),t(\"p\",[e._v(\"我们用POST请求发送数据时候，可以直接把想发送的数据传递给xhr.send函数，也可以用FormData序列化后再发送。\")]),t(\"p\",[e._v(\"如何使用\")]),t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"let fd = new FormData()\\nfd.append('img', file) // file是想发送的数据，可以是文本，也可以是二进制数据\\nxhr.send(fd)\\n\")])]),t(\"p\",[e._v(\"使用FormData的时候，请求头会自动加上相对应的Content-Type，因此你不应该再自己手动加了。\")]),t(\"p\",[e._v(\"观察Network可以发现， 请求实体的数据由boundary分割开，而boundary是在Content-Type里设定的。\")]),t(\"h3\",{attrs:{id:\"参考\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" 参考\")]),t(\"p\",[t(\"a\",{attrs:{href:\"http://javascript.ruanyifeng.com/htmlapi/file.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"阮一峰：文件与二进制数据的操作\")])]),t(\"p\",[e._v(\"还是阮老师写的好哈哈哈，本文就随便记录一下（我知道没人看\")])])}],!1,null,null,null);a.default=l.exports}}]);","extractedComments":[]}